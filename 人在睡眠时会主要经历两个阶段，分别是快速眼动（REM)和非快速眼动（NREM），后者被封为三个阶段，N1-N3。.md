**Sleep stage:**

During sleep, human undergo two major stages known as rapid eye movement(REM) and non-rapid eye movement (NREM), and non-rapid eye movement(NREM) being further divided into three stages - N1, N2, and N3. While the importance of sleep in human life is well recognized, much is known about its specfic physiological purpose. Here is some theories about how sleep works, including(https://www.ncbi.nlm.nih.gov/books/NBK526132/)

sleep is a necessary function which plays important role in recuperation, energy efficiency, and survival(https://my.clevelandclinic.org/health/articles/12148-sleep-basics)

sleep is also essential for function like neural growth, memory, emotional control, cardiovascular, and bone metabolism(https://www.nhlbi.nih.gov/health/sleep/why-sleep-important, and cellular toxin removal(https://www.nih.gov/news-events/news-releases/brain-may-flush-out-toxins-during-sleep.

<img src="https://www.sleepfoundation.org/wp-content/uploads/2021/12/SF-23-022_SleepCycle_Pie_Desktop-1024x717.png" alt="A normal sleep cycle graph showing the time spent in N1, N2, N3, and REM stages of sleep." style="zoom:50%;" />

The diffrence between sleep stage:
N1(Light sleep):The brain would become more relaxed, low-amplitude mixed-frequency (LAMF) activity substitute the alpha brainwaves, it would took control when you fell asleep, your respiration stay normal, and the body has more muslcle tone.

N2(Light Sleep): The heart rate and body temperature would drop, and the eyes movement stops. At the same, brain waves became slower. Once in a while, a burst of rapid waves called sleep spindles appears.

N3(Deep sleep): At this stage brain waves called delta wave, the brain stays at the slowest rate. It could be difficult to wake you up, and the people awakened at this point, experienced a short tine of confusion and damaged cognitive system. In deep sleep, physical body would repaire by itself, and strength the immune system, healing bone, muscle, tissue.

REM sleep:
At this point, the brain activity resemble that of awaken person. The muscle experience sagging, with the exception of your eyes, it move more rapidly than usual. And the heart rate increases and breathing becomes erratic.



**Why is REM sleep so important:**



**Why is N3(Deep Sleep) so important:**



The room factor affect sleep quality:
Sleep condtion relate to the bedroom where you sleep. A unsatisfactory room decrease your chance to get a good night's sleep, which make sleep quality poor. Best conditions for sleeping should be consisted of cool, dark, and quiet.

temperature: (https://www.sleepstation.org.uk/articles/sleep-tips/sleep-and-temperature/)
What is the ideal temperature of a bed room when people were sleeping. The suggested bedroom temperature for sleep is between 15.5 and 21°C (60 and 70°F). The target temperature for bedroom is around 18.3°C, as it is decent average that is frequently referred in literature.
The ability to sleep well can be affected by an uncomfortable bedroom. People might need to experiment to find out the ideal temperature truly works for them. Since everyone has own preference for heat.
(https://www.sleepfoundation.org/bedroom-environment/best-temperature-for-sleep)
Higher temperature can make unpleasant and restless sleep, and people who have expericence of sleeping in a stuffy bedroom can verify that's it's tough to fail asleep when they are sweating and being thirsty. The body's ability to adjust its temperature can be interfered by a warm bedroom and cause fatigue. (https://www.sleepfoundation.org/bedroom-environment/best-temperature-for-sleep)

It has been prove that, temerature changes have impact on these sleep stage and the sleep quality.

The has been shown that, greater body temperatures during sleeping are related to less **deep sleep(N3)**, and **REM**. The sleep quality mainly dependent on these two stages. What's more, lack of REM and slow-wave sleep can have severe influence on memory ability, body recovery, immunity.(https://www.sleepstation.org.uk/articles/sleep-tips/sleep-and-temperature/)



Humidity: 

Liquid water concentration in the air considered as humidity. Both excessively humidity, too high or too low, can be harmful. Humidity can affected sleep quality. Base on the studies, high humidity can disturb sleep cycle and the specific function that occur during sleeping. What is more, humidity level is associated with higher allergen concentrations that can have negative impact on people's capacity to sleep.(https://www.sleepfoundation.org/bedroom-environment/humidity-and-sleep)

High humidity can cause adverse impact on duration of slow wave NREM and REM sleep. Due to the significance of these two stages for sleep quality, sleeper with nap with high humidity might have problem with physical recovery and memory consolidation. humidity can affect sleep quality in indirect ways. In addtion to trigger bronchitis, lung infections, and other breathing issues that might interfere sleep and cause sleep disruption. Another concern about about allergens that cause undesirable responses in individuals attempting to sleep. Humid conditons can create a suitable habitat for mold and dust mites, which are minusule creatures that often inhabit mattresses and box springs. Morever, umidity can cause some people to perspire excessively, leading to discomfort while trying to rest in bed.

Conversely, being exposed to excessively low degree of humidity can lead to health problems like dry skin, itchy eyes, and sore throat.



Light:

(https://www.sleepfoundation.org/bedroom-environment/light-and-sleep)

Natural light and darkness play an important role in adjusting sleepers' sleep -wake cycle's circadian rhythms. During the day, your eyes detect sunshine in the morning, alerting the brain to release cortisol, a hormone that impprove alertness and energy. In the other hand, when it becomes dark at night, the brain produces melatonin and hormone which induces relaxation and sleepiness.

By the comparison, exposure to artificial light in the night time can disrupt sleeper's circadian rhythms and delay the onset of sleep or increase tje times it takes to fail asleep. The intensity of light is measured in lux units. It has been proven that, slow-wave sleep, a significant stage of sleep cycle for cell repair and physical recovery, can linked to reduce awakenings during night time and exposure to light sources with a lux degree of 10 or higher later in the day.



**The relation between body movement(Roll over) and sleep :**

Some studies have used accelerometer to prove the relationship between the frequency of body turning and sleep quality, and have indicated that there is a certain correlation between the two. 

(https://www.ncbi.nlm.nih.gov/pmc/articles/PMC9416198/) When testing the connection between roll over frequency and subjective sleep quality, it was discovered that sleeper are more likely to turn over frequently when they experiencing poor sleep quality. On the other hand, people who are in deep sleep stage toss and roll over less frequently. In the early of the night, individuals are likely to turn over frequently as they are trying to reach a comfortable posture to fall asleep. People's turn over frequency around 1.86 to 2.40 per hours. The study of objective sleep data showed that the preferred sleep gesture and roll over times interacted with sleep factors such as multiple awakening and REM period.

(https://ieeexplore.ieee.org/abstract/document/4352587?casa_token=d3nOnbjmP-oAAAAA:hHcnwU1VK1VKgYLbC6Mu3hbDgL0sXWc_UoWzygmqi7aw0IPQTUe1FyTBtrhYQ56R2hLj0MGCpyo) According to the study, participants with **MDD**(Major depressive disorder) tend to have higher turn over frequency and poorer sleep quality during the test period.



**Reason why turn over frequently** (https://www.eightsleep.com/blog/why-we-toss-and-turn-at-night/)

Various causes of tossing a lot during sleep can exist, One frequent cause if insomnia or sleep disorder is consumption of alcohol or caffine before people go to bed. Additionally, a room with high temperature or excessive light can lead sleep disruption as well. Psychological factors like anxiety  and concern should be taken into account, as they make people difficult to fall asleep.



Analysis:

**3.1 Feature:** 

During the literature review, the search of relevant information was beneficial in identifying the key features to incorporate into the application. From this research, several features were identified that could be implemented in the application, including the ability to track sleep scores, room condition, sleep duration, bed time, wake up time, and receive push notifications(sleep reminder) and providing useful information about sleep in general, in addition, showing weather forecast and offering feeback about room conditions, appeared feasible as potential function of the application

+ **3.1.1 Tracking:**
  + Room conditions: The function that track room conditions, such as temperature and humidity, light monitoring, can help users identify factors that may be have impact on their sleep and make adjustments as needed.
  + Duration, bed time, wake up time: Users can create a consistent sleep schedule by maintaining recording of their sleep length, the time they went to bed, wake up time. This could provide insights about sleep patterns for the users. 
  + Sleep score:
+ **3.1.2 Meditation:** Incorporating meditation practices into this application can also improve sleep quality by prmoting relaxation and relief stress. 
+ **3.1.3 Useful tips about sleep:** Provide the comprehensive information about sleep, which can educated users about healthy sleep habits and encourage them to choose an effective sleep schedule.
+ **3.1.4 Notification and alarm, weather forecast:** Push notifications and alarm can function as reminder to go to bed or wake up a particular time, which adjust sleeper habits by regulating sleep schedule. 
+ **3.1.5 Displaying using visuals:** Displaying data over a short period using visuals like line charts, can help user to have better understanding about sleep pattern. By presenting information in a clear and visual format, users can easily find out trends and pattern in their sleep data.
+ **3.1.6 Reiceiving feeback:** Receiving feeback about room conditions, such as light level, temperature degree, and humidity level can help user to handle factors that may affect their sleep quality



User interface:

Figma being used as a tool to design user interface of app, here are some advantage:

+ Consistent design: The user interface should maintain a consistent design thoroughout the app, with a similar layout, font , and colour schema used across all pages. This would help users navigate the app more easily and create more cohesive and professional appearance.

+ Clear navigation: The app's navigation can be intuitive and easy to follow, with clears labels and icons that help users understant where they are in the app and how to across diffrent feauture

+ Prototyping and Testing: Figma allows for the create of interactive prototypes that can be used to test users interface with real users. These prototypes can help identify usability issues and provide valluable feeback that can be used to refine and improve the design. Users can customized their own appropriate plans for their sleeping environment by checking weather forecast

  



Ethics 



**Legal Considerations:**

Privacy laws: 

The sleep app should comly with privacy laws and regulation to protect users personal information. This app should obtain explicit agreement from users for collecting and dealing their private information, and ensure that data is kept and transmitted safely.

Medical information and advise: It was decided that general sleep information would not display directly in this application. Instead, the information would be linked to external websites that host the content, to ensure the application is not providing wrong or misleading sleep advice or information. The external information would be selected carefully and are trusted resources which is reliable.









Design

4.1 System design

![image-20230429215139308](/Users/guochaojun/Library/Application Support/typora-user-images/image-20230429215139308.png)

This sleep application consists of mobile app, back-end, front-end system. The front-end plans to use XML for the user interface. Kotlin been selected as back-end programming language.

As of 2023, multiple programming languages been chosen for developing in Android Studio, the most popular are C++, Java, Kotlin. Among them, kotlin has been selected as the programming language in this project. The reason for this is(https://developer.android.com/kotlin): Kotlin is first-class supported by Android Studio. Beginner can regard Java-based equivalent code as Kotlin code. Additionally, due to the concision of Kotlin, Kotlin is a more efficient and cost saving than Java. And it require less code to reach the same results as Java did. What is more, Kotlin provide features tailored for Android development.(https://dac.digital/kotlin-vs-java/)

The back-end of the application incorporates the use of sensor data. Those sensor data would be collected by enviroment sensors from room condition and motion sensor for detecting body movement frequency.The data collected through the sensor will be visualised and presented to the users in forms of sleep report and line Additionally, user can manually input sleep reminder time and alarm time into database based on their preferred sleep schedule. 

The API (https://aws.amazon.com/cn/what-is/api/) is a technique that enable two software components to communicate with each other by using a set of definitions and protocols. It gives the applicaion permission to access the data and apply it as function.

For instance, the weather API might offer current weather information based on user's location, this app might use the weather information to make tailored sleep suggestion. The user may be able to access online meditation course, and environment sound via the media API.





Design pattern:

MVC (Model-View-Controller) and MVVM (Model-View-ViewModel) are two popular design pattern widely used in software development, specially for creating mobile application.



<img src="https://developer.mozilla.org/en-US/docs/Glossary/MVC/model-view-controller-light-blue.png" alt="MVC - MDN Web Docs Glossary: Definitions of Web-related terms | MDN" style="zoom:24%;" />

MVC: MVC contains three different interconnected components

+ Model - represent the data and and the business logic of the application.
+ View - take the responsibility of generating the user interface and showing the data.
+ Controller - deal user input, update the model and view accordingly, and manage the flow of data between these two.



<img src="https://learn.microsoft.com/en-us/xamarin/xamarin-forms/enterprise-application-patterns/mvvm-images/mvvm.png" alt="The Model-View-ViewModel Pattern - Xamarin | Microsoft Learn" style="zoom:75%;" />

MVVM: MVVM is a variation  of MVC and is a design pattern that establish distinct separation between the user interface and application. The view model act as mediator for communication between view and model. The view model exposes characteristics and commands that the view bind to.



While there are various way to implement MVC and MVVM. The MVC pattern can be used in the context of the sleep app to separate the user interface from business logic  and the data(such as sleep score, room condition) The controller will process  sensor data and monitor communication between the view and the model, at the same time, the view would provide the data and the user interface.

The out outline of design of MVVM pattern

+ The model layer will representthe data that needs to be stored, including the user's email, sleep target, reminer time, and alarm time.
+ The View layer will showing the data, and user can interact with data by viewing data on the view layer. The email, sleep reminder, and alarm time, room condition, are shown by text field, edit text, or other UI components.
+ The ViewModel is charged in providing data to the View layer, and receiving data from user interface. This layer also retrieve data from model layer and update data. In the Sleep app, two view model are mainly used, 
  + SleepDiaryViewModel. The SleepDiaryModel is responsible for storing and retrieving data related user's sleep condition(duration, room condition). The method createDiary() would add new record into the database. It would be a suspend function, because it might perform long-running operation and needed to be called from a cororoutine.
  + SensorViewModel.  The SensorViewModel is charged for monitoring sensor data. It interacts with Model layer through multiple sensor classes, such as Temperature, Light, Humidity and accelerator. 

To sum up, the MVVM pattern outline clear boundaries of the Model, View, and ViewModel layers, makes it simpler to manage and maintain the code. This application can store and retrieve user data more efficiently by this pattern, as well as modify the user interface.



**Back end of the application:**

**Data and file storage overview:**

In Android develpoment, a file system similar to disk-based file systems that used on other platforms. Multiple choices of storing app data are provided, like databases, shared-preference, and app-specific storage.(https://developer.android.com/training/data-storage)

+ App-specific storage: App-specific storage can be used to keep files in particular folders volume or external storage that are only aim to be used by the application. Internal storage can be utilised private user information that can't be readed by other applications.
+ Share storage: Share storage permits developer to store files that application wants to shared with other apps, like media, documents, and other things.
+ Preference(https://www.protechtraining.com/blog/post/example-preferences-in-android-75): Android utilise preferences to keep track of user and application preferences.  Preference would store sensitive, primitive basic information in key-pair pairs.
+ Databases: Take the advantage of the Room presistence library to record organised data in private database.

Database:

Room definition:

An abstraction layer from SQLite is offered by Roon library, in order to make fluent database access while using all capacity of SQLite.(https://developer.android.com/training/data-storage/room)

SQLite definition:(https://developer.android.com/training/data-storage/room)

A txt format file on a devide is the place where data are stored by the open source SQL data base SQLite. Android is supported by SQLite, all the implementation and aspects of relational database.



Adavantage of Room:

Compile -time validation of SQL queries.

Convenient annotations decrease the repetition of code and error-prone boilerplate code. 

Streamlined database migration paths

Disadvantage of Room:

**Do not allow manual insertion queries**

relation have to be built, if room is using



https://medium.com/mindorks/using-room-database-android-jetpack-675a89a0e942

Advantage of SQLite: 

Familiarity, SQLite is widely used in database engine, more developers are famililar with SQLite, which means it is easier to develop.

Better performance:SQLite is light weight database,  consume less resource, and easier to be used as embedded software with devide like TV, smart phone,home electronic devices.

Disadvantage of SQLite:

Compile-time validation of raw SQL queris does not support

When the schema changes, it would affect the SQL queris, The procudure to update the SQL queris, it is time consuming and error-prone.



Why room over SQLite（https://medium.com/mindorks/sqlite-made-easy-room-persistence-library-ecd1a5bb0a2c）

Base on the table above,  there are reasons why choose Room over SQLite. First thing first, Room serve compile-time SQL query verification, which means error can be detected before runtime, increasing the total reliability of the application. Morever, room can offer useful annotation that avoid high repetition of code and error-prone boilerplate code.

Meanwhile, Room provides simple database migrations path, it would update the data schema over. But when the data schema updated in SQLite, the SQL queris would affected and it is more laborious to handle these change.

Although SQLite have better performance and more popular amog the developer, The reliability and simplicity still make Room a better choice for android application

**UML** 

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230430140604857.png" alt="image-20230430140604857" style="zoom:50%;" />

Two entities are desgin and mainly used in the application.

**User Entity**: the User Entity stands for the kotlin data class annotated with @Entity, indicating that it would be used as a database table which named "user". The entity would contain around seven fields, first column would be id field which is @PrimaryKey field automatically generate by Room. The "id" in the "User" class is used to identify unique user.Next three fields like full_name, email, password are used to store personal information and verify user's authentication.  "sleep_reminder" is used to store the time when user wants to be reminded to sleep. A default value "22:00" would be set for "sleep_reminder", but it could be change according to user's preference. "sleep_target" field used to store the target number of sleep hours that user wants achieve daily. "wakeup_alarm" would be mark as the time user wants to wake up.

**SleepDiary**: "SleepDiary" entity represents the data class store the sleep data, it include the foreign key from "User" entity, It shows that each "SleepDiary" is relate to a specific "User" entity. "SleepDiary" entity also consisted by other field, "diaryId" for primary key. Field like "sleep_score", "start_time", "end_time", "duration", "temperature", "lightness" and "humidity" are used to tracking sleep condition.

To sum up, the UML design illustrates the structure of database structure built by one-to-many relation between "User" and "SleepDiary" entities.

**4.5 Front end of the application:**

The front end sometimes referred to as the client-side, is what the user interacts with and is made by in XML in this application.

4.5.1 XML (https://www.w3schools.com/xml/xml_whatis.asp)

+ XML represents extensible markup language
+ XML is a markup language similar to HTML
+ XML was created to store and move data

+ XML aims to be self-descriptive

4.5.2 Responsiveness(https://developer.android.com/guide/topics/large-screens/migrate-to-responsive-layouts)

Application's user interface (UI) should adaptable to various devices. To ensure responsiveness, the UI needs to be programmed to fits different screen sizes, orientation, and device statuses

(https://developer.android.com/develop/ui/views/layout/constraint-layout)

Resonsive UI can be built by constraint layout. 'constraint' can be used to lay the child views, allows position-based relationships exists between different views in the layout. Constraint layout allows developer to construct most of views with simply single structure. Furthermore, constraint layout improve the performance by using less nest views.(https://arunpandianm.medium.com/responsive-ui-with-constraint-layout-2fce50f0d902)



Application tab

Home tab: Main tab also contain weather forcast, it can be a useful feature to help users to plan their sleep and understand how the eather may affect their sleep quality. Three more tabs are contained inside home tab

+ Tips tab: The "Tips" part offer visitors with helpful and trustful external source to help users sleep better.
+ Tracking tab: Allow users to track their sleep data, such as duration, start time, wake up time, room condition(humidity, temperature, ligtness), sleep score.
+ Tracking history tab:  the tracking history page illustrate the monitoring information over a short period, along with graphs and charts can be used to better understand user's sleep pattern, and adjust them. And the feeback of from each sleep can also be checked.

Alarm tab: Users are allowde to set and customise their sleep reminder, target, sleep alarms according to preferences.

Meditation tab: Provides users with various meditation course, enviroment sound to help users to relax and improve their sleep quality.

+ Player tab: player tab can be used to adjust the meditation audio by seeker, or forward, backword button, and pause the audio

Setting tab: Allow users to update their personal information like password. Notification setting switch the reminder on or off.



Application flow

In this section, An diagram indicates how users can navigate to different pages in the application. The diagram start with "home" page, then users can access other pages. This diagram illustrates how users can interact with this application by switch between different routs

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230423222534184.png" alt="image-20230423222534184" style="zoom:50%;" />



Feature design:

Main feature could be implemented in different ways. This part would prove justice of approcach to deal with.

### **Chapter 5: Implementation and Testing**

This chapter outlines the techniques that were used to implement the functional requirements mentioned in chapter 3 and the design pattern specified in chapter 4. 

5.1.1 Splash screen and login in, sign up page

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230424183321229.png" alt="image-20230424183321229" style="zoom: 25%;" />

Figure 5.1 splash screen

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230424183421190.png" alt="image-20230424183421190" style="zoom:25%;" />

Figure 5.2 login page

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230424183624465.png" alt="image-20230424183624465" style="zoom:25%;" />

Figure 5.3



The splash page **Figure 5.1 splash screen** is the first page that users see when they open the sleep application, the splash screen provides an overview of the functions.

The login page **Figure 5.2**  is the page where existing users can login in th the application.  Layout for this page include logo and two text field email and password, and login button are all necessary steps in the construction of login page. This application checks the user's credentials and logs them in when they input the correct email address and password and press the login button. The implementation of the login functinality involves interacting with the Room local database to verify the user's credentials.

People who try to use this application can create an account on the sign-up page. The sign -up page contain id, email, password, confirm password textfield, as well as sign-up button. The programme create a new user account in the local database (in this case, Room) once the user input the information and press the "Register" button. The new "User" would be created in the database. This implementation also involved validation to ensure user input strong security password and correct form email.



<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230424202550775.png" alt="image-20230424202550775" style="zoom:25%;" />

Figure 5.4 Home page with weather forecast, and tracking button, view history button, tips search bar

This more obvious thing in home page is the weather forecast. The home page's implementation involves integrating  the OpenWeather API to show user the current weather data base on specific location. The page layout includes displaying current weather information including **outdoor humidity, temperature, weather status, pressure**. OpenWeather server's API utilised to obtain the weather data, and it is formed with the related data in JSON format.

Figure 5.5 code Snippet

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230424222446900.png" alt="image-20230424222446900" style="zoom:33%;" />

Figure 5.5 external source

The home page also included external source from third party to provide details about how the weather affect sleep quality. The third party information are chosen from reliable website.

In general, the home page provides users useful weather data that may have impact on their sleep quality. User can incorporate the weaather data with thrid party information to adjust their sleep pattern.



5.2 Sleep diary

The design of sleep diary has been specified in chapter 3, according to the UML design, the database should look like this.

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230425150125309.png" alt="image-20230425150125309" style="zoom:50%;" />

The sleep diary functionality is carried by Room database library.The primary key 'diaryId' is incremental number. In order to ensure that each diary has a distinct identity, the sleepDiary entity make the 'diaryID' field to be automatically created. As a result, it could be easier to make CRUD(create, read,update and delete).

The diary entry is connected to 'User' who record his diary as using 'user_id' as Foreign key. This make sure that each item in the sleep diary database is linked to a individual user and it is simpler to query all diary made by that user.



5.3 Tracking(make a diary) page

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230425201554372.png" alt="image-20230425201554372" style="zoom: 25%;" />

The tracking function would be triggered, after user click on 'start tracking' button on the home page, they will be taken to the tracking page where tracking function will activated. On this page, user can see the live data of humidity, temperature and lightness, as well as the duration of the tracking session. The body roll-over numbers would be calculate in the background service, so user can use the tracking function without any interruption, even when user swith to another application or the phone switch off. When user click on stop tracking after they wake up, the result of tacking would be saved into sleep diary database. With this feature, user cam gain insight of their sleep condition and make adjustments to improve their sleep health.



5.3.1 Environment sensors

The enviromental sensor plays a critial role in tracking indoor sleep conditions, particularly in a sleep application where creating a ideal sleep environment is important. Three environmental sensor would be applied in this application, such as "Humidity", "Temperature", "Light" sensors. 

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230425225827578.png" alt="image-20230425225827578" style="zoom: 33%;" />

Figure 5.4 the humidity class

This section would go through how the sensor being used and how to combine them into the SensorViewModel. First thing first, These three sensor class needs to be created, so the instance of the SensorManager class can be made later.

Four essentials classes and interface

+ SensorManager
  + used to get/configure sensors and listeners 
+ Sensor
  + used to query the sensor capabilities
+ SensorEvent
  + Contains the event details
+ SensorEventListener
  +  receives updates to sensors ○ i.e. handles SensorEvents

<img src="/Users/guochaojun/Library/Application Support/typora-user-images/image-20230425232812752.png" alt="image-20230425232812752" style="zoom:50%;" />

In the sensor class, SensorManager being used to implement humidity sensor 'TYPE_RELATIVE_HUMIDITY', it would retrieves the default sensor after the SensorManager being initialized. Then, event listener would be sets up by SensorEventListener interface, which is in charged for dealing sensor events, particularly the onSensorChanged event. This event became active when change happens, and it updates the value of live data, which can be read from UI in real-time.

The startHumiditySensing() function is used to register the listener and sensor processing being launched. In the other hand, stopHumiditySensing() function would be trigger when user wants to stop the tracking, then it would terminate this function.

